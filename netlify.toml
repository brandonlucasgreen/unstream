[build]
  command = "npm run build"
  publish = "dist"
  functions = "netlify/functions"

[[redirects]]
  from = "/api/search/sources"
  to = "/.netlify/functions/search-sources"
  status = 200

[[redirects]]
  from = "/api/search/musicbrainz"
  to = "/.netlify/functions/search-musicbrainz"
  status = 200

[[redirects]]
  from = "/api/embed/bandcamp"
  to = "/.netlify/functions/embed-bandcamp"
  status = 200

[[redirects]]
  from = "/api/resolve/url"
  to = "/.netlify/functions/resolve-url"
  status = 200

[[redirects]]
  from = "/api/desktop/version"
  to = "/.netlify/functions/desktop-version"
  status = 200

[[redirects]]
  from = "/plus"
  to = "https://kidlightbulbs.lemonsqueezy.com/checkout/buy/d4e127a7-2cef-4013-80b8-5d0de691f332"
  status = 302

# SPA catch-all: serve index.html for all routes (must be last)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
